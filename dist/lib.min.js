class t{constructor(t){this.data=t?.data,this.selector=t?.selector||"body",this.ITEM_HEIGHT=t?.itemHeight||15,this.VIEW_PORT_HEIGHT=t?.height||150,this.viewPortClass=".view-port",this.containerClass=".container",this.scrollItemClass=".virtual-scroll-item",this.initDom(),this.initDomSkeleton(),this.bindEvent(),this.bindStyle(),this.updateHeight(),this.updateLayout()}getItem(t,e){return`<div class="${this.getSelector(this.scrollItemClass)}" style="top:${t*this.ITEM_HEIGHT}px;">${e}</div>`}initDom(){this.dataDoms=this.data.map(((t,e)=>this.getItem(e,t)))}initDomSkeleton(){var t=document.createElement("div");t.classList.add(this.getSelector(this.viewPortClass));var e=document.createElement("div");e.classList.add(this.getSelector(this.containerClass)),t.appendChild(e),document.querySelector(this.selector).appendChild(t)}updateHeight(){document.querySelector(this.containerClass).style.height=this.dataDoms.length*this.ITEM_HEIGHT+"px",document.querySelector(this.viewPortClass).style.height=this.VIEW_PORT_HEIGHT+"px"}bindEvent(){const t=this;document.querySelector(this.viewPortClass).addEventListener("scroll",(function(e){t.updateLayout()}))}updateLayout(){const t=document.querySelector(this.viewPortClass).scrollTop/this.ITEM_HEIGHT;document.querySelector(this.containerClass).innerHTML=this.dataDoms.slice(t,this.VIEW_PORT_HEIGHT/this.ITEM_HEIGHT+t+1).join("")}push(t){this.dataDoms.push(this.getItem(this.dataDoms.length,t)),this.updateHeight(),this.updateLayout()}static loadCssCode(t){const e="VIRTUAL_LIST_CSS_MARK";if(document.querySelector(`style#${e}`))return document.querySelector(`style#${e}`).parentNode.removeChild(document.querySelector(`style#${e}`));var s=document.createElement("style");s.type="text/css",s.rel="stylesheet",s.id=e,s.appendChild(document.createTextNode(t)),document.getElementsByTagName("head")[0].appendChild(s)}getSelector(t){return t.slice(1)}bindStyle(){t.loadCssCode(`\n    ${this.viewPortClass} {\n      display: block;\n      flex: 1 1 auto;\n      height: 100%;\n      max-width: 100%;\n      overflow: auto;\n      position: relative;\n    }\n\n    ${this.scrollItemClass} {\n      left: 0;\n      position: absolute;\n      right: 0;\n    }`)}}export{t as VirtualList};
